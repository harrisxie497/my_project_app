version: '3.8'

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: japan_backend
    ports:
      - "8000:8000"
    volumes:
      - ./backend/storage:/app/storage
    environment:
      - DATABASE_URL=sqlite:///./app.db
      - SECRET_KEY=your-secret-key-change-me-in-production
      - ALGORITHM=HS256
      - ACCESS_TOKEN_EXPIRE_MINUTES=30
    restart: unless-stopped
    # 如果需要依赖其他服务（如数据库），可以添加depends_on
    # depends_on:
    #   - db

# 如果需要使用外部数据库，可以添加以下服务
#  services:
#    db:
#      image: mysql:8.0
#      container_name: japan_db
#      environment:
#        - MYSQL_ROOT_PASSWORD=root_password
#        - MYSQL_DATABASE=japan_db
#        - MYSQL_USER=japan_user
#        - MYSQL_PASSWORD=japan_password
#      ports:
#        - "3306:3306"
#      volumes:
#        - db_data:/var/lib/mysql
#      restart: unless-stopped

# volumes:
#   db_data:
